<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Sentiment Analyzer</title>
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/styles.css') }}"
    />
  </head>
  <body>
    <div class="container">
      <h1>AI Sentiment Analyzer</h1>

      <form method="POST">
        <textarea
          name="text"
          placeholder="Type a sentence..."
          required
          onkeyup=""
        >
{{ text }}</textarea
        >
        <button type="submit">Analyze</button>
      </form>

      {% if prediction %}
      <div class="result {{ prediction.lower() }}">
        <h2>{{ prediction }}</h2>
        <p>Confidence: {{ (confidence * 100) | round(2) }}%</p>
      </div>
      {% endif %} {% if explanation %}
      <div class="explanation">
        <h3>Why this prediction?</h3>
        <ul>
          {% for word, score in explanation %}
          <li>
            <strong>{{ word }}</strong>
            {% if score > 0 %}
            <span class="positive-word">(+{{ score | round(3) }})</span>
            {% else %}
            <span class="negative-word">({{ score | round(3) }})</span>
            {% endif %}
          </li>
          {% endfor %}
        </ul>
      </div>
      {% endif %}
    </div>
    <script type="text/javascript">
      function handleKeyPress(event) {
        if (event.key === "Enter") {
          // Prevent the default action (inserting a new line)
          event.preventDefault();
          // Manually submit the form
          document.getElementById("predictionForm").submit();
        }
      }

      function toggleButton() {
        const input = document.getElementById("messageInput");
        const button = document.getElementById("predictBtn");
        button.disabled = input.value.trim() === "";
      }

      // Check button state on page load
      window.addEventListener("DOMContentLoaded", toggleButton);
    </script>
  </body>
</html>
